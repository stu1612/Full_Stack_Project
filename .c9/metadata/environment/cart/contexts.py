{"filter":false,"title":"contexts.py","tooltip":"/cart/contexts.py","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":21,"column":85},"action":"insert","lines":["from django.shortcuts import get_object_or_404","from services.models import Service","","","def cart_contents(request):","    \"\"\"","    Ensures that the cart contents are available when rendering","    every page","    \"\"\"","    cart = request.session.get('cart', {})","","    cart_items = []","    total = 0","    service_count = 0","    ","    for id, quantity in cart.items():","        service = get_object_or_404(Service, pk=id)","        total += quantity * service.price","        service_count += quantity","        cart_items.append({'id': id, 'quantity': quantity, 'service': service})","    ","    return {'cart_items': cart_items, 'total': total, 'service_count': service_count}"],"id":1}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":21,"column":85},"end":{"row":21,"column":85},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1570882204718,"hash":"fa91aa505b31e35b862116110d247915f8ff98aa"}